<!--name:项目整体结构-->
# 项目整体结构

## 创建新的应用

```shell
node createproject.js first
```

运行后会在apps目录下创建一个first目录，这个first目录就是一个项目。

默认会创建一个用于简单演示的项目，你可以在这个基础上进行开发。

你可能已经熟悉了wight开发，这时候创建一个空项目更适合：

```shell
node createproject.js --empty second
```

一个项目的目录结构：

| 目录/文件 | 作用 | 说明 |
| ---- | ---- | ---- |
| app.js | 应用首次加载执行的代码 | 这个文件中的代码可以使用顶层await |
| app.css | 全局css | 其实每个页面的css文件也是全局的，需要做隔离可以给每个页面的css加上页面前缀 |
| config.json | 项目配置文件 | 此文件主要用于项目的开发和构建 |
| pages | 页面所在目录 | 创建的页面都在此目录 |
| components | 组件目录 | 这里面有一个@css目录，此目录存储的css文件是给组件使用的，具体参考组件部分的文档 |
| extends | 扩展目录 | 每个扩展都是一个js文件，通过exports导出扩展 |
| static | 静态资源所在目录 | 应用构建以后，此目录需要和构建的应用一并交给服务端程序用于静态资源请求 |
| manifest.json | 应用资源清单 | 这个是渐进式应用（PWA）的规范，但是似乎目前支持不是很好 |
| favicon.ico | 应用图标 | 显示在标签页上 |

关于manifest参考：

[MDN: manifest](https://developer.mozilla.org/zh-CN/docs/Web/Manifest)

## 创建页面

### 通过命令创建页面

```shell
node newpage.js first myinfo setting
```

在first应用中创建myinfo和setting页面。

### 通过config.json创建页面

在 config.json的配置项pages中直接添加：

```json
{
    "pages": [
        "home",
        "user",
        "myinfo",
        "setting"
    ]
}
```

保存后，当应用的服务启动时会自动创建不存在的页面。

## 创建组件

```shell
node newcomps.js first x-y
```

组件的命名必须是xxx-xxx的形式，也就是要和html的标签能够绝对区分出来，不能冲突。这个web自定义组件的规范。

运行后，会在components目录创建一个x-y目录，这里面会有相关的代码和配置说明文件。

## 创建扩展

直接在extends中创建js文件即可。

扩展类似于程序开发中的开发库。启用的扩展可以通过require导入，可以直接通过w.ext访问，比如：

```javascript

let userinfo = require('userinfo')
let info = userinfo.get()

// 或者 let info = w.ext.userinfo.get()
```

推荐使用require的方式在文件的开头进行导入，这样代码的耦合程度更低。

