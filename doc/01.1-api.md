# w全局对象的API

浏览器环境的window对象仍然是可用的。框架在初始化的时候，会初始化全局对象w。

w上提供了一切框架环境运行期间的功能封装。在代码的任何位置，你都可以直接通过w.xx的形式访问属性或调用接口。

> ----
> ## 路由和页面相关
> ----

### 跳转到页面：w.go

```javascript
//函数定义
w.go = function (path, args={}){}
```

示例：
```javascript
//url会变成 #user?id=12
w.go('user', {id: 12})
```

### 页面滚动： w.scroll

```javascript
//函数定义，参考MDN element.prototype.scroll文档。
w.scroll = function(x,y){}
```

示例：

```javascript
w.scroll(10, 100)
w.scroll({
    top: 100,
    left: 200,
    behaviro: 'smooth'
})
```

w.scrollTop()可以直接滚动到页面顶部。

### 返回上一页：w.goBack

此函数没有参数，如果检测到历史记录大于1才会返回，并且返回值为true，否则返回false。

### 重定向：w.redirect

```javascript
//函数定义
w.redirect = function(path, args={}){}
```

示例：

```javascript
w.redirect('home')
```
重定向会替换当前页面，不会产生新的历史记录。


> ----
> ## 钩子函数：hooks
> ----

钩子函数是一种在加载页面之前要运行的函数，可以添加多个，一旦某个函数返回false则会终止对页面的加载。

### w.addHook

注册hook函数：

```javascript
w.addHook((ctx) => {
    //检测如果token失效则返回false
    if (!w.ext.checkToken()) return false;
}, {name: 'login-check', exclude: ['login', 'aboutus']});
//选项：钩子函数名字是login-check，exclude表示对login和aboutus页面不执行。
```

### w.removeHook

移除hook函数：

```javascript
w.removeHook('login-check')

```

